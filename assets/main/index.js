System.register("chunks:///_virtual/FoodScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var i,t,n,a,r,o,s,p,c,u,d,l;return{setters:[function(e){i=e.applyDecoratedDescriptor,t=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,a=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){o=e.cclegacy,s=e._decorator,p=e.Node,c=e.Vec3,u=e.instantiate,d=e.Component},function(e){l=e.GameManagerScript}],execute:function(){var h,f,g,w,v,m,S,y;o._RF.push({},"36299aVF6dNp4LyI4atlPpv","FoodScript",void 0);var z=s.ccclass,F=s.property;e("FoodScript",(h=z("FoodScript"),f=F({type:p}),h((v=i((w=function(e){function i(){for(var i,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];return i=e.call.apply(e,[this].concat(n))||this,a(i,"foodPrefab",v,r(i)),a(i,"gridSize",m,r(i)),a(i,"gameAreaSize",S,r(i)),a(i,"gameAreaPosition",y,r(i)),i.spawnInterval=4,i.despawnTime=10,i.spawnTimer=0,i.isSpawning=!1,i.activeFood=[],i}t(i,e);var o=i.prototype;return o.update=function(e){if(this.isSpawning){this.spawnTimer+=e,this.spawnTimer>=this.spawnInterval&&(this.spawnTimer-=this.spawnInterval,this.spawn());for(var t=this.activeFood.length-1;t>=0;t--){var n=this.activeFood[t],a=n.getComponent(i);a&&a.isExpired()&&this.despawn(n)}}},o.spawn=function(){var e,i,t,a=this,r=this.gameAreaSize.x/2,o=this.gameAreaSize.y/2;do{e=Math.floor(Math.random()*(this.gameAreaSize.x/this.gridSize))*this.gridSize-r+this.gameAreaPosition.x,i=Math.floor(Math.random()*(this.gameAreaSize.y/this.gridSize))*this.gridSize-o+this.gameAreaPosition.y,t=!0;var s=l.Instance.getSnakeHead(),p=s.getBodySegments(),d=s.getTailSegment();if(s.node.position.equals(new c(e+10,i+10,0)))t=!1;else{for(var h,f=n(p);!(h=f()).done;){if(h.value.position.equals(new c(e+10,i+10,0))){t=!1;break}}d.position.equals(new c(e+10,i+10,0))&&(t=!1)}}while(!t);var g=u(this.foodPrefab);g.setPosition(new c(e+10,i+10,0)),g.parent=this.node.parent,this.activeFood.push(g),this.scheduleOnce((function(){return a.despawn(g)}),this.despawnTime)},o.despawn=function(e){var i=this.activeFood.indexOf(e);-1!==i&&this.activeFood.splice(i,1),e.destroy()},o.isExpired=function(){return!1},o.startSpawning=function(){this.isSpawning=!0,this.spawnTimer=0},o.stopSpawning=function(){this.isSpawning=!1;for(var e,i=n(this.activeFood);!(e=i()).done;){e.value.destroy()}this.activeFood=[]},o.getActiveFood=function(){return this.activeFood},i}(d)).prototype,"foodPrefab",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),m=i(w.prototype,"gridSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return 20}}),S=i(w.prototype,"gameAreaSize",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(320,340,0)}}),y=i(w.prototype,"gameAreaPosition",[F],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return new c(0,70,0)}}),g=w))||g));o._RF.pop()}}}));

System.register("chunks:///_virtual/GameManagerScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./SnakeScript.ts","./FoodScript.ts"],(function(e){var t,n,i,r,a,o,s,c,u,l,d,p,h;return{setters:[function(e){t=e.applyDecoratedDescriptor,n=e.inheritsLoose,i=e.initializerDefineProperty,r=e.assertThisInitialized},function(e){a=e.cclegacy,o=e._decorator,s=e.Node,c=e.Label,u=e.director,l=e.Button,d=e.Component},function(e){p=e.SnakeScript},function(e){h=e.FoodScript}],execute:function(){var f,S,b,y,g,m,v,w,P,k,L,D,G,H,z,F,I,K,C,O,A,B,R,T,M,U;a._RF.push({},"17f56aKrKFKXrX7XlZK2SlH","GameManagerScript",void 0);var E=o.ccclass,_=o.property;e("GameManagerScript",(f=E("GameManagerScript"),S=_({type:s}),b=_({type:s}),y=_({type:s}),g=_({type:c}),m=_({type:p}),v=_({type:h}),w=_({type:s}),P=_({type:s}),k=_({type:s}),L=_({type:s}),D=_({type:s}),f(((U=function(e){function t(){for(var t,n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=e.call.apply(e,[this].concat(a))||this,i(t,"startScreen",z,r(t)),i(t,"instructionScreen",F,r(t)),i(t,"gameOverScreen",I,r(t)),i(t,"scoreLabel",K,r(t)),i(t,"snakeHead",C,r(t)),i(t,"food",O,r(t)),i(t,"pauseScreen",A,r(t)),i(t,"dPadUp",B,r(t)),i(t,"dPadDown",R,r(t)),i(t,"dPadLeft",T,r(t)),i(t,"dPadRight",M,r(t)),t.score=0,t.isGameActive=!1,t.isPaused=!1,t}n(t,e);var a=t.prototype;return a.onLoad=function(){t.Instance=this,this.instructionScreen.active=!1,this.gameOverScreen.active=!1,this.pauseScreen.active=!1,this.addButtonListener(this.dPadUp,"UP"),this.addButtonListener(this.dPadDown,"DOWN"),this.addButtonListener(this.dPadLeft,"LEFT"),this.addButtonListener(this.dPadRight,"RIGHT"),this.showStartScreen()},a.showStartScreen=function(){this.startScreen.active=!0},a.startInstruction=function(){this.startScreen.active=!1,this.instructionScreen.active=!0,this.snakeHead.initializeSnake()},a.startGame=function(){this.instructionScreen.active=!1,this.isGameActive=!0,this.food.startSpawning(),this.score=0,this.updateScore(0)},a.gameOver=function(){this.isGameActive&&(this.isGameActive=!1,this.food.stopSpawning(),this.gameOverScreen.active=!0)},a.restartGame=function(){this.gameOverScreen.active=!1,this.isGameActive=!0,this.snakeHead.reset(),this.food.startSpawning(),this.score=0,this.updateScore(0)},a.pauseGame=function(){this.isGameActive&&(this.isPaused=!this.isPaused,this.pauseScreen.active=this.isPaused,this.isPaused?(this.pauseScreen.active=!0,u.pause()):(this.pauseScreen.active=!1,u.resume()))},a.home=function(){t.Instance=null,u.loadScene("LongSnake")},a.updateScore=function(e){this.scoreLabel.string=""+e},a.onFoodEaten=function(e){this.food.despawn(e),this.score++,this.updateScore(this.score),this.food.spawn()},a.getFoodScript=function(){return this.food},a.getSnakeHead=function(){return this.snakeHead},a.addButtonListener=function(e,t){var n=this,i=e.getComponent(l);i&&i.node.on(l.EventType.CLICK,(function(){return n.onDPadPress(t)}),this)},a.onDPadPress=function(e){if(this.snakeHead)switch(e){case"UP":this.snakeHead.onKeyDown({keyCode:38});break;case"DOWN":this.snakeHead.onKeyDown({keyCode:40});break;case"LEFT":this.snakeHead.onKeyDown({keyCode:37});break;case"RIGHT":this.snakeHead.onKeyDown({keyCode:39})}},a.onDestroy=function(){t.Instance=null},t}(d)).Instance=void 0,z=t((H=U).prototype,"startScreen",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),F=t(H.prototype,"instructionScreen",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=t(H.prototype,"gameOverScreen",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(H.prototype,"scoreLabel",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(H.prototype,"snakeHead",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(H.prototype,"food",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=t(H.prototype,"pauseScreen",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=t(H.prototype,"dPadUp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(H.prototype,"dPadDown",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),T=t(H.prototype,"dPadLeft",[L],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),M=t(H.prototype,"dPadRight",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),G=H))||G));a._RF.pop()}}}));

System.register("chunks:///_virtual/main",["./FoodScript.ts","./GameManagerScript.ts","./SnakeScript.ts"],(function(){return{setters:[null,null,null],execute:function(){}}}));

System.register("chunks:///_virtual/SnakeScript.ts",["./rollupPluginModLoBabelHelpers.js","cc","./GameManagerScript.ts"],(function(e){var t,i,n,o,s,r,a,h,l,c,d,g,m,u,p,S,f,y;return{setters:[function(e){t=e.applyDecoratedDescriptor,i=e.inheritsLoose,n=e.createForOfIteratorHelperLoose,o=e.initializerDefineProperty,s=e.assertThisInitialized},function(e){r=e.cclegacy,a=e._decorator,h=e.Sprite,l=e.SpriteFrame,c=e.Node,d=e.input,g=e.Input,e.EventKeyboard,m=e.KeyCode,u=e.Vec3,p=e.instantiate,S=e.Vec2,f=e.Component},function(e){y=e.GameManagerScript}],execute:function(){var b,v,P,w,k,z,x,D,A,F,I,R,O,_,K,C,L;r._RF.push({},"25aa6dKSwBHPphBaJxF2KfF","SnakeScript",void 0);var E=a.ccclass,W=a.property;e("SnakeScript",(b=E("SnakeScript"),v=W(h),P=W(l),w=W(l),k=W(l),z=W(l),x=W(c),D=W(c),b((I=t((F=function(e){function t(){for(var t,i=arguments.length,n=new Array(i),r=0;r<i;r++)n[r]=arguments[r];return t=e.call.apply(e,[this].concat(n))||this,o(t,"headSprite",I,s(t)),o(t,"headUp",R,s(t)),o(t,"headDown",O,s(t)),o(t,"headLeft",_,s(t)),o(t,"headRight",K,s(t)),o(t,"bodySegmentPrefab",C,s(t)),o(t,"tailSegmentPrefab",L,s(t)),t.direction=new S(1,0),t.nextDirection=new S(1,0),t.moveInterval=.2,t.timer=0,t.gridSize=20,t.gameAreaSize=new S(320,340),t.gameAreaPosition=new u(0,70,0),t.bodySegments=[],t.tailSegment=null,t}i(t,e);var r=t.prototype;return r.onLoad=function(){this.node.active=!1,d.on(g.EventType.KEY_DOWN,this.onKeyDown,this)},r.update=function(e){y.Instance.isGameActive&&(this.timer+=e,this.timer>=this.moveInterval&&(this.timer-=this.moveInterval,this.direction.set(this.nextDirection),this.moveSnake(),this.checkFoodCollision(),this.checkSelfCollision()))},r.onKeyDown=function(e){if(y.Instance.isGameActive){e.keyCode;switch(e.keyCode){case m.ARROW_UP:0===this.direction.y&&(this.nextDirection.set(0,1),this.headSprite.spriteFrame=this.headUp);break;case m.ARROW_DOWN:0===this.direction.y&&(this.nextDirection.set(0,-1),this.headSprite.spriteFrame=this.headDown);break;case m.ARROW_LEFT:0===this.direction.x&&(this.nextDirection.set(-1,0),this.headSprite.spriteFrame=this.headLeft);break;case m.ARROW_RIGHT:0===this.direction.x&&(this.nextDirection.set(1,0),this.headSprite.spriteFrame=this.headRight)}}},r.moveSnake=function(){var e=this.node.position.clone().add3f(this.direction.x*this.gridSize,this.direction.y*this.gridSize,0),t=this.gameAreaPosition.x-this.gameAreaSize.x/2,i=this.gameAreaPosition.x+this.gameAreaSize.x/2,n=this.gameAreaPosition.y-this.gameAreaSize.y/2,o=this.gameAreaPosition.y+this.gameAreaSize.y/2;if(e.x<t||e.x>i||e.y<n||e.y>o)y.Instance.gameOver();else{var s=null;this.bodySegments.length>0&&(s=this.bodySegments[this.bodySegments.length-1].position.clone());for(var r=this.bodySegments.length-1;r>0;r--){var a=this.bodySegments[r],h=this.bodySegments[r-1];a.setPosition(h.position)}this.bodySegments.length>0&&this.bodySegments[0].setPosition(this.node.position),this.node.setPosition(e),this.tailSegment&&s&&this.tailSegment.setPosition(s)}},r.initializeSnake=function(){var e=new u(10,70,0);this.node.active=!0,this.node.setPosition(e);var t=p(this.bodySegmentPrefab);t.parent=this.node.parent,t.setPosition(e.x-this.gridSize,e.y,0),this.bodySegments.push(t),this.tailSegment=p(this.tailSegmentPrefab),this.tailSegment.parent=this.node.parent,this.tailSegment.setPosition(e.x-2*this.gridSize,e.y,0)},r.checkFoodCollision=function(){for(var e=this.node.position,t=y.Instance.getFoodScript().getActiveFood(),i=0;i<t.length;i++){var n=t[i];if(e.equals(n.position)){y.Instance.onFoodEaten(n),this.growSnake();break}}},r.growSnake=function(){var e=p(this.bodySegmentPrefab);if(e.parent=this.node.parent,this.bodySegments.length>0){var t=this.bodySegments[this.bodySegments.length-1];e.setPosition(t.position)}else e.setPosition(this.node.position);this.bodySegments.push(e)},r.checkSelfCollision=function(){for(var e,t=this.node.position,i=n(this.bodySegments);!(e=i()).done;){var o=e.value;if(t.equals(o.position))return void y.Instance.gameOver()}this.tailSegment&&t.equals(this.tailSegment.position)&&y.Instance.gameOver()},r.getBodySegments=function(){return this.bodySegments},r.getTailSegment=function(){return this.tailSegment},r.onDestroy=function(){d.off(g.EventType.KEY_DOWN,this.onKeyDown,this)},r.reset=function(){var e=new u(10,70,0);this.node.setPosition(e),this.direction.set(1,0),this.nextDirection.set(1,0);for(var t,i=n(this.bodySegments);!(t=i()).done;){t.value.destroy()}this.bodySegments=[],this.tailSegment&&(this.tailSegment.destroy(),this.tailSegment=null),this.initializeSnake()},t}(f)).prototype,"headSprite",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=t(F.prototype,"headUp",[P],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),O=t(F.prototype,"headDown",[w],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),_=t(F.prototype,"headLeft",[k],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),K=t(F.prototype,"headRight",[z],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),C=t(F.prototype,"bodySegmentPrefab",[x],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=t(F.prototype,"tailSegmentPrefab",[D],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),A=F))||A));r._RF.pop()}}}));

(function(r) {
  r('virtual:///prerequisite-imports/main', 'chunks:///_virtual/main'); 
})(function(mid, cid) {
    System.register(mid, [cid], function (_export, _context) {
    return {
        setters: [function(_m) {
            var _exportObj = {};

            for (var _key in _m) {
              if (_key !== "default" && _key !== "__esModule") _exportObj[_key] = _m[_key];
            }
      
            _export(_exportObj);
        }],
        execute: function () { }
    };
    });
});